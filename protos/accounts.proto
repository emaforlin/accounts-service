syntax = "proto3";

package accounts.v1;

import "google/protobuf/timestamp.proto";
import "buf/validate/validate.proto";

service Accounts {
    rpc GetAccountDetails(GetAccountDetailsRequest) returns (GetAccountDetailsResponse);
    rpc AddPersonAccount(AddPersonAccountRequest) returns (GenericResponse);
}

message AddPersonAccountRequest {
    string username = 1 [(buf.validate.field).string = {min_len: 4, max_len: 30}];
    string first_name = 2 [(buf.validate.field).string = {min_len: 1, max_len: 40}];
    string last_name = 3 [(buf.validate.field).string = {min_len: 4, max_len: 80}];
    string phone_number = 4 [(buf.validate.field).string = {min_len: 3, max_len: 15}];
    string email = 5 [(buf.validate.field).string = {min_len: 5,max_len: 256}];
    string password = 6 [(buf.validate.field).string = {min_len: 8, max_len: 64}];
}

message GetAccountDetailsRequest {
    oneof identifiers {
        string username = 1 [(buf.validate.field).string = {min_len: 4, max_len: 30}];
        string email = 2 [(buf.validate.field).string = {min_len: 5,max_len: 256}];
        string phone_number = 3 [(buf.validate.field).string = {min_len: 3, max_len: 15}];
    }
}

message GetAccountDetailsResponse {
    uint32 id = 1;
    string username = 2;
    string email = 3;
    string phone_number = 4;
    string role = 5;
    google.protobuf.Timestamp created_at = 6;
    google.protobuf.Timestamp updated_at = 7;
    google.protobuf.Timestamp deleted_at = 8;

}

message GenericResponse {
    string message = 1;
}